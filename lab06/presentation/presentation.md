---
## Front matter
lang: ru-RU
title: Отчёт по лабораторной работе 6
author: 'Радимов Игорь'

## Formatting
toc: false
slide_level: 2
theme: metropolis
mainfont: Ubuntu
romanfont: Ubuntu
sansfont: Ubuntu
monofont: Ubuntu
header-includes:
  - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
  - '\makeatletter'
  - '\beamer@ignorenonframefalse'
  - '\makeatother'
aspectratio: 43
section-titles: true
---

# Цель работы

Развить навыки администрирования ОС Linux. Получить первое практическое знакомство с технологией SELinux.
Проверить работу SELinx на практике совместно с веб-сервером
Apache.

# Задание

Лабораторная работа подразумевает изучение влияния дополнительных атрибутов на файлы пользователя и изучение механизмов изменения идентификаторов.

# Выполнение лабораторной работы

1. Войдём в систему и убедимся что SELinux работает в режиме enforcing. Убедимся что веб-сервер работает. Найдём веб-сервер Apache в списке процессов. Посмотрим текущее состояние переключателей SELinux для Apache.(рис 3-6)

![рис.3. Getenforce и sestatus.](images/3.jpg){ #fig:003 width=90% }

![рис.4. Проверка работы веб-сервера.](images/4.jpg){ #fig:004 width=90% }

![рис.5. Список процессов.](images/5.jpg){ #fig:005 width=90% }

![рис.6. Переключатели SELinux для Apache.](images/6.jpg){ #fig:006 width=90% }

2. Посмотрим статистику по политике. Определим тип файлов и поддиректорий в /var/www и /var/www/html. Определим круг пользователей, которым разрешено создание файлов в директории /var/www/html. Создадим от имени суперпользователя html файл. Проверим контенкст созданного файла. (рис.7-10)

![рис.7. Seinfo.](images/7.jpg){ #fig:007 width=90% }

![рис.8. Определение типа файлов и круга пользователей.](images/8.jpg){ #fig:008 width=90% }

![рис.9. HTML код для веб сервера.](images/9.jpg){ #fig:009 width=90% }

![рис.10. Проверим контекст созданного файла.](images/10.jpg){ #fig:010 width=90% }

3. Обратимся к файлу через веб-сервер и убедимся, что файл был успешно отображен. Выясним какие контексты файлов определены для httpd. Изменим контекст файла test.html . Попробуем ещё раз получить доступ к файлу через веб-серввер, но получим сообщение об ошибке.(рис.11-15)

![рис.11. Браузер и веб-сервер.](images/11.jpg){ #fig:011 width=90% }

![рис.12. Лог файлы.](images/12.jpg){ #fig:012 width=90% }

![рис.13. Лог файлы(часть 2).](images/13.jpg){ #fig:013 width=90% }

![рис.14. Запрет доступа к веб-серверу.](images/14.jpg){ #fig:014 width=90% }

![рис.15. Анализ ситуации.](images/15.jpg){ #fig:015 width=90% }

4. Посмотрим лог файлы веб-сервера Apache. Попробуем запустить веб-сервер Apache на прослушивание TCP-порта 81. Выполним перезапуск(получен сбой). ( рис.16-19)

![рис.16. Лог веб-сервера.](images/16.jpg){ #fig:016 width=90% }

![рис.17. Listen 81.](images/17.jpg){ #fig:017 width=90% }

![рис.18. Неудачная попытка соединения с веб-сервером через браузер.](images/18.jpg){ #fig:018 width=90% }

![рис.19. Перезапуск сервера.](images/19.jpg){ #fig:019 width=90% }

5. Проанализируем лог файлы. Проверим список портов и убедимся, что 81 появился в списке. Попробуем запустить сервер ещё раз. Успешно.(рис. 20-24)

![рис.20. Лог.](images/20.jpg){ #fig:020 width=90% }

![рис.21. Лог(часть2).](images/21.jpg){ #fig:021 width=90% }

![рис.23. Список портов.](images/22.jpg){ #fig:022 width=90% }

![рис.24. Повторный перезапуск сервера.](images/23.jpg){ #fig:023 width=90% }

![рис.24. Удачная попытка доступа к серверу.](images/24.jpg){ #fig:024 width=90% }

6. Исправим обратно конфигурационный файл apache. Удалим привязку к 81 порту. Удалим файл test.html.(рис. 25-26)

![рис.25. Исправление конфигурационного файла.](images/25.jpg){ #fig:025 width=90% }

![рис.26. Удаление привязки и файла.](images/26.jpg){ #fig:026 width=90% }

---

## {.standout}

Спасибо за внимание
