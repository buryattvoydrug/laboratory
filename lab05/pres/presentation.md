---
## Front matter
lang: ru-RU
title: Отчёт по лабораторной работе 5
author: 'Радимов Игорь'

## Formatting
toc: false
slide_level: 2
theme: metropolis
mainfont: Ubuntu
romanfont: Ubuntu
sansfont: Ubuntu
monofont: Ubuntu
header-includes:
  - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
  - '\makeatletter'
  - '\beamer@ignorenonframefalse'
  - '\makeatother'
aspectratio: 43
section-titles: true
---

# Цель работы

Изучение механизмов изменения идентификаторов, применения SetUID- и Sticky-битов. Получение практических навыков работы в консоли с дополнительными атрибутами. Рассмотрение работы механизма смены идентификатора процессов пользователей, а также влияние бита Sticky на запись и удаление файлов.

# Задание

Лабораторная работа подразумевает изучение влияния дополнительных атрибутов на файлы пользователя и изучение механизмов изменения идентификаторов.

## Выполнение основной частии лабораторной работы

1. Создал программу simpleid.c (рис. 1).

   ![рис.1. Программа simpleid.c](images/2.jpg){ #fig:001 width=60% }

---

2. Выполнил системную программу id и сравнил полученный результат с данными предыдущего пункта задания (рис. 2). Видим, что пользователи и группы совпадают. При этом команда id вывела действительные идентификаторы, а программа вывел эффективные, но при этом они совпадают и выводят 1001, то есть пользователя quest.

   ![рис.2. Компиляция программы simpleid, её выполнение и сравнение с командой id.](images/3.jpg){ #fig:002 width=60% }

---

3. Усложнил программу, добавив вывод действительных идентификаторов, получившуюся программу назвал simpleid2.c (рис. 3).

   ![рис.3. Программа simpleid2.c](images/4.jpg){ #fig:003 width=60% }

---

4. Запустил simpleid2 и id командами ./simpleid2 и id (рис. 4). Сравнил результаты: действительные идентификаторы совпадают с выводом команды id - везде 0, то есть рут-пользователь. Так же важно заметить, что эффективные идентификаторы совпадают с действительными.

![рис.4. Изменение владельца программы и установка SetUID-бита, проверка установки и изменения, запуск программы и команды id.](images/6.jpg){ #fig:004 width=60% }

---

5. Проделал тоже самое относительно SetGID-бита (рис. 5)

Установка SetGID-бита отражается к команде ls, а сравнение выполнения программы и команды id дало следующие результаты: действительные идентификаторы совпадают с выводом команды id - везде 0, то есть рут-пользователь. Но так же важно заметить, что эффективные идентификаторы отличны от действительных: пользователь - 0, группа - 1001.

![рис.5. Установка SetGID-бита, проверка установки, запуск программы и команды id.](images/7.jpg){ #fig:005 width=60% }

---

6. Создал программу readfile.c (рис. 6).

![рис.6. Программа readfile.c](images/8.jpg){ #fig:006 width=60% }

---

7. Проверил, может ли программа readfile прочитать файл readfile.c. Да, может (рис. 7).

![рис.7. Выполнение программы readfile с файлом readfile.c.](images/10.jpg){ #fig:007 width=60% }

---

8. Проверил, может ли программа readfile прочитать файл /etc/shadow. Её выполненеи возможно в том числе, так как владельцем файла является root-пользователь (рис. 8).

![рис.8. Выполнение программы readfile с файлом /etc/shadow.](images/11.jpg){ #fig:008 width=60% }

---

## Исследование Sticky-бита

9. От пользователя quest2 (не являющегося владельцем) попробовал прочитать файл /tmp/file01.txt командой cat /tmp/file01.txt (рис. 9).

   ![рис.9. Выполнение пунктов 1-4 исследования Sticky-бита .](images/12.jpg){ #fig:009 width=60% }

---

10. От пользователя quest2 попробовал удалить файл /tmp/file01.txt командой rm /tmp/fileOl.txt. Мне не удалось удалить файл (рис. 10).

![рис.10. Выполнение пунктов 5-9 исследования Sticky-бита .](images/13.jpg){ #fig:010 width=60% }

---

11. Повторил предыдущие шаги (рис. 11). Видим, что дозапись и запись так же разрешены, но при этом удалось и удалить файл. Мне удалось удалить файл от имени пользователя, не являющегося его владельцем.

![рис.11. Выполнение пунктов 10-13 исследования Sticky-бита .](images/14.jpg){ #fig:011 width=60% }

---

## {.standout}

Спасибо за внимание
